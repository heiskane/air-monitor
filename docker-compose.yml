version: "3.8"

services:
  mosquitto:
    image: eclipse-mosquitto
    ports:
      - 1883:1883
    volumes:
      - ./conf/mosquitto.conf:/mosquitto/config/mosquitto.conf
      - ./conf/creds:/mosquitto/config/creds
    restart: always

  database:
    image: "postgres"
    ports:
      - 5432:5432
    environment:
      POSTGRES_PASSWORD: postgres
    restart: always

  grafana:
    image: grafana/grafana-oss
    ports:
      - 3000:3000
    user: '472'
    volumes:
      - /var/lib/grafana:/var/lib/grafana

volumes:
  conf:
  grafana:
